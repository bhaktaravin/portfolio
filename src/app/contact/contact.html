<div class="contact-layout">
  <!-- LEFT TILE: Freelance/Consulting Availability -->
  <div class="availability-banner" *ngIf="freelanceAvailability.showBanner">
    <!-- Header -->
    <div class="availability-header">
      <div class="availability-title-row">
        <span class="availability-icon">üíº</span>
        <h3>Available for Freelance & Consulting Work</h3>
      </div>
      <div class="availability-badge">
        <span class="pulse-dot"></span>
        <span>{{ freelanceAvailability.statusText }}</span>
      </div>
    </div>

    <!-- Specializations -->
    <div class="availability-card specializations-card">
      <h4>
        <span class="card-icon">üõ†Ô∏è</span>
        Specializations
      </h4>
      <ul class="spec-list">
        <li *ngFor="let spec of freelanceAvailability.specializations">
          <span class="spec-bullet">‚ñ∏</span>
          <span>{{ spec }}</span>
        </li>
      </ul>
    </div>

    <!-- Rates -->
    <div class="availability-card rates-card">
      <h4>
        <span class="card-icon">üí∞</span>
        Rates
      </h4>
      <div class="rate-items">
        <div class="rate-item">
          <span class="rate-label">Hourly</span>
          <span class="rate-value">{{ freelanceAvailability.rates.hourly }}</span>
        </div>
        <div class="rate-divider"></div>
        <div class="rate-item">
          <span class="rate-label">Project-based</span>
          <span class="rate-value">{{ freelanceAvailability.rates.projectBased }}</span>
        </div>
      </div>
    </div>

    <!-- CTA -->
    <div class="availability-cta">
      <p>
        Interested in working together? Select <strong>"Freelance Project"</strong> or
        <strong>"Technical Consultation"</strong> in the subject dropdown below.
      </p>
      <button class="cta-button" (click)="scrollToForm()">
        <span>Get Started</span>
        <span class="cta-arrow">‚Üí</span>
      </button>
    </div>
  </div>

  <!-- RIGHT TILE: Contact Form -->
  <div class="contact-section">
  <h2>Contact Me</h2>
  <form
    (ngSubmit)="submitContact(contactForm)"
    #contactForm="ngForm"
    class="contact-form"
  >
    <!-- Name Field -->
    <div class="form-group" [class.has-error]="errors().name">
      <label for="name">Name</label>
      <input
        id="name"
        name="name"
        [(ngModel)]="contact.name"
        (focus)="onFieldFocus('name')"
        required
        minlength="2"
        maxlength="100"
        [class.error]="errors().name"
      />
      <span class="error-message" *ngIf="errors().name">
        {{ errors().name }}
      </span>
    </div>

    <!-- Email Field -->
    <div class="form-group" [class.has-error]="errors().email">
      <label for="email">Email</label>
      <input
        id="email"
        name="email"
        type="email"
        [(ngModel)]="contact.email"
        (focus)="onFieldFocus('email')"
        required
        [class.error]="errors().email"
        placeholder="name@example.com"
      />
      <span class="error-message" *ngIf="errors().email">
        {{ errors().email }}
      </span>
    </div>

    <!-- Subject Field -->
    <div class="form-group" [class.has-error]="errors().subject">
      <label for="subject">Subject</label>
      <select
        id="subject"
        name="subject"
        [(ngModel)]="contact.subject"
        (change)="onSubjectChange()"
        required
        [class.error]="errors().subject"
      >
        <option value="" disabled>Select a subject</option>
        <option *ngFor="let option of subjectOptions" [value]="option.value">
          {{ option.label }}
        </option>
      </select>
      <span class="error-message" *ngIf="errors().subject">
        {{ errors().subject }}
      </span>
    </div>

    <!-- Message Field -->
    <div class="form-group" [class.has-error]="errors().message">
      <label for="message">Message</label>
      <textarea
        id="message"
        name="message"
        [(ngModel)]="contact.message"
        (focus)="onFieldFocus('message')"
        rows="5"
        required
        minlength="10"
        maxlength="5000"
        [class.error]="errors().message"
        placeholder="Tell me about your project or inquiry..."
      ></textarea>
      <div class="character-count">{{ contact.message.length }} / 5000</div>
      <span class="error-message" *ngIf="errors().message">
        {{ errors().message }}
      </span>
    </div>

    <!-- Honeypot (Anti-Spam) -->
    <input
      type="text"
      name="honeypot"
      [(ngModel)]="contact.honeypot"
      style="display: none"
      tabindex="-1"
      autocomplete="off"
    />

    <!-- General Error -->
    <div class="error-message" *ngIf="errors().general">
      {{ errors().general }}
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      [disabled]="!canSubmit()"
      [class.loading]="isSubmitting()"
      [class.success]="submitted()"
    >
      <span class="btn-icon">{{ submitButtonIcon() }}</span>
      <span class="btn-text">{{ submitButtonText() }}</span>
    </button>

    <!-- Rate Limit Warning -->
    <div class="info-message" *ngIf="submitCount() >= 3">
      ‚ö†Ô∏è You've reached the maximum number of submissions for this session.
    </div>
  </form>

  <!-- Success Message -->
  <div *ngIf="submitted()" class="contact-success">{{ successMessage() }}</div>
  </div>
</div>
